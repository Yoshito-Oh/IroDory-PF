<!--プロフィールのヘッダーを入れる場所-->
<div class="user_header" style="background-color:purple;">
  <%= attachment_image_tag(@user, :profile_header, width: '100%',height: '300px', fallback: "no_image.jpg") %>
</div>
<br />
<div class="container">
  <div class="row">
    <div class="col-lg-3">
      <div class="profile_image" style="text-align:center">
        <%= attachment_image_tag(@user, :profile_image, :size => "200x200", fallback: "no_image.jpg") %>
        <br />
        <%= @user.nickname %>
        <br />
          <!--フォロー・フォロワー数-->
        <% if current_user.id == @user.id %>
          <table style="text-align:center">
            <tr>
              <td>フォロー</td>
              <td>
                <%= link_to following_public_user_path(@user) do %>
                  <%= @user.followings.count %>
                <% end %>
              </td>
            </tr>
            <tr>
              <td>フォロワー</td>
              <td>
                <%= link_to follower_public_user_path(@user) do %>
                  <%= @user.followers.count %>
                <% end %>
              </td>
            </tr>
          </table>
          <div class="user_button">
            <%= link_to "編集", edit_public_user_path(current_user.id), class: "btn btn-outline-secondary w-75 rounded-pill" %><br />
          </div>
          <div class="user_button">
            <%= link_to "退会", public_user_path(current_user.id), method: :delete, class: "btn btn-outline-danger w-75 rounded-pill" %>
          </div>

        <% else %>
          <% if current_user.following?(@user) %>
            <%= link_to "フォロー解除", public_user_relationships_path(@user.id), class: 'btn btn-primary',method: :delete, remote: true %>
          <% else %>
            <%= link_to "フォロー", public_user_relationships_path(@user.id), class: 'btn btn-outline-primary',method: :post, remote: true %>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="col-lg-9">
      <table class="table">
        <thead>
          <tr class="table_head">user infomation</tr>
        </thead>
        <tbody>
          <tr>
            <td class="gn-light">ユーザネーム</td>
            <td class="gn-light"><%= @user.name %></td>
          </tr>
          <tr>
            <td class="bg-light">ユーザニックネーム</td>
            <td class="bg-light"><%= @user.nickname %></td>
          </tr>
          <tr>
            <td class="gn-light">自己紹介</td>
            <td class="gn-light"><%= @user.introduction %></td>
          </tr>
          <!--普段使用している画材-->
          <tr>
            <td class="bg-light">投稿枚数</td>
            <td class="bg-light"><%= @user.post_images.count%></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-lg-12">
      <p style="text-align:center">-投稿一覧-</p>
      <% @post_images.each do |post_image| %>
        <div class="post_image_list" style="display:inline-block;text-align:center">
          <%= link_to public_item_image_post_image_path(post_image.id) do %>
            <%= attachment_image_tag post_image, :image, width: '200px', height: '200px', style: "object-fit:cover"  %><br />
            <%= post_image.title %>
          <% end %>

        </div>
      <% end %>
    </div>
    <div class="col-lg-12">
      <% if current_user.id == @user.id %>
      <p style="text-align:center">-投稿待機一覧-</p>
        <% @pending_images.each do |pending_image| %>
        <div class="pending_list" style="display:inline-block;text-align:center">
          <%= link_to public_item_image_post_image_path(pending_image.item_image_id, pending_image.id) do %>
            <%= attachment_image_tag pending_image, :image, width: '200px', height: '200px', style: "object-fit:cover"  %><br />
            <%= pending_image.title %>
          <% end %>
        </div>
        <% end %>
      <% end %>
    </div>
    <div class="col-lg-12">
      <p style="text-align:center">-最新ブックマーク-</p>
      <% @favorites.each do |favorite| %>
        <div class="favorite_list" style="display:inline-block;">
          <%= link_to public_item_image_post_image_path(item_image_id: favorite.post_image.item_image_id,id: favorite.post_image.id) do %>
            <div></div>
            <%= attachment_image_tag favorite.post_image, :image, width: '200px', height: '200px', style: "object-fit:cover" %><br />
            <%= favorite.post_image.title %><br />
            <%= favorite.post_image.user.nickname %>
          <% end %>
          <!--切替ボタン-->
        </div>
      <% end %>
    </div>
  </div>
</div>